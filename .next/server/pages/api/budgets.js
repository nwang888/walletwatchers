"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/budgets";
exports.ids = ["pages/api/budgets"];
exports.modules = {

/***/ "sqlite3":
/*!**************************!*\
  !*** external "sqlite3" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("sqlite3");

/***/ }),

/***/ "sqlite":
/*!*************************!*\
  !*** external "sqlite" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("sqlite");;

/***/ }),

/***/ "(api)/./src/pages/api/budgets.js":
/*!**********************************!*\
  !*** ./src/pages/api/budgets.js ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ budgetHandler)\n/* harmony export */ });\n/* harmony import */ var sqlite3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sqlite3 */ \"sqlite3\");\n/* harmony import */ var sqlite3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(sqlite3__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var sqlite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sqlite */ \"sqlite\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([sqlite__WEBPACK_IMPORTED_MODULE_1__]);\nsqlite__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n// create an async function that posts the budget to the associated account in the database\nasync function postBudget(budget) {\n    // open the database\n    const db = await (0,sqlite__WEBPACK_IMPORTED_MODULE_1__.open)({\n        filename: \"./sql/big.db\",\n        driver: (sqlite3__WEBPACK_IMPORTED_MODULE_0___default().Database)\n    });\n    try {\n        console.log(\"Inserting budget:\", budget);\n        await db.run(`\n      INSERT INTO Budgets (budget_id, budget_name, start_date, end_date, budget_amount)\n      VALUES (?, ?, ?, ?, ?)\n      `, [\n            budget.budget_id,\n            budget.budget_name,\n            budget.start_date,\n            budget.end_date,\n            budget.budget_amount\n        ]);\n    } catch (e) {\n        console.log(\"error inserting budget:\", e);\n    }\n    // update the budget for the account\n    await db.close();\n}\n// the async function that gets all of the budget information from the database\nasync function getBudget() {\n    const db = await (0,sqlite__WEBPACK_IMPORTED_MODULE_1__.open)({\n        filename: \"./sql/big.db\",\n        driver: (sqlite3__WEBPACK_IMPORTED_MODULE_0___default().Database)\n    });\n    const info = await db.all(`\n        SELECT * FROM Budgets\n    `);\n    await db.close();\n    return info;\n}\nasync function budgetHandler(req, res) {\n    // Handling Get request\n    if (req.method == \"GET\") {\n        try {\n            //this may not be needed\n            const payload = await getBudget();\n            if (payload.length == 0) {\n                console.log(payload);\n                return res.status(200).json({\n                    message: \"no budget set\"\n                });\n            } else {\n                return res.status(200).json(payload);\n            }\n        } catch (e) {\n            return res.status(500).send(\"its broken\");\n        }\n    }\n    // Handling POST request\n    if (req.method === \"POST\") {\n        const { budget_name , start_date , end_date , budget_amount  } = req.body;\n        //the id for the budget\n        console.log(req.body);\n        const budget_id = Math.floor(Math.random);\n        // Post the budget to the database\n        try {\n            postBudget({\n                budget_id,\n                budget_name,\n                start_date,\n                end_date,\n                budget_amount\n            });\n            res.status(200).json({\n                message: \"Budget set successfully!\"\n            });\n        } catch (error) {\n            res.status(500).json({\n                message: \"Failed to set budget.\",\n                error: error.message\n            });\n        }\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UyxTQUFTO2dCQUFFQyxXQUFXO2dCQUFFQyxVQUFVO2dCQUFFQyxRQUFRO2dCQUFFQyxhQUFhO2FBQUMsQ0FBQyxDQUFDO1lBQzNFUSxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPLEVBQUUsMEJBQTBCO2FBQUUsQ0FBQyxDQUFDO1FBQ2xFLEVBQUUsT0FBT00sS0FBSyxFQUFFO1lBQ1paLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU8sRUFBRSx1QkFBdUI7Z0JBQUVNLEtBQUssRUFBRUEsS0FBSyxDQUFDTixPQUFPO2FBQUUsQ0FBQyxDQUFDO1FBQ3JGLENBQUM7SUFDTCxDQUFDO0FBQ0gsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9wYWdlcy9hcGkvYnVkZ2V0cy5qcz83OGJiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzcWxpdGUzIGZyb20gJ3NxbGl0ZTMnO1xuaW1wb3J0IHsgb3BlbiB9IGZyb20gJ3NxbGl0ZSc7XG5cbi8vIGNyZWF0ZSBhbiBhc3luYyBmdW5jdGlvbiB0aGF0IHBvc3RzIHRoZSBidWRnZXQgdG8gdGhlIGFzc29jaWF0ZWQgYWNjb3VudCBpbiB0aGUgZGF0YWJhc2VcbmFzeW5jIGZ1bmN0aW9uIHBvc3RCdWRnZXQoYnVkZ2V0KXtcbiAgICAvLyBvcGVuIHRoZSBkYXRhYmFzZVxuICAgIGNvbnN0IGRiID0gYXdhaXQgb3Blbih7XG4gICAgICAgIGZpbGVuYW1lOiBcIi4vc3FsL2JpZy5kYlwiLFxuICAgICAgICBkcml2ZXI6IHNxbGl0ZTMuRGF0YWJhc2UsXG4gICAgfSk7XG4gICAgdHJ5e1xuICAgICAgY29uc29sZS5sb2coXCJJbnNlcnRpbmcgYnVkZ2V0OlwiLCBidWRnZXQpO1xuICAgICAgYXdhaXQgZGIucnVuKGBcbiAgICAgIElOU0VSVCBJTlRPIEJ1ZGdldHMgKGJ1ZGdldF9pZCwgYnVkZ2V0X25hbWUsIHN0YXJ0X2RhdGUsIGVuZF9kYXRlLCBidWRnZXRfYW1vdW50KVxuICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVxuICAgICAgYCxbYnVkZ2V0LmJ1ZGdldF9pZCwgYnVkZ2V0LmJ1ZGdldF9uYW1lLCBidWRnZXQuc3RhcnRfZGF0ZSwgYnVkZ2V0LmVuZF9kYXRlLCBidWRnZXQuYnVkZ2V0X2Ftb3VudF0pO1xuICAgIH1cbiAgICBjYXRjaChlKXtcbiAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3IgaW5zZXJ0aW5nIGJ1ZGdldDpcIiwgZSk7XG4gICAgfVxuICAgIC8vIHVwZGF0ZSB0aGUgYnVkZ2V0IGZvciB0aGUgYWNjb3VudFxuICAgIGF3YWl0IGRiLmNsb3NlKCk7XG59XG5cbi8vIHRoZSBhc3luYyBmdW5jdGlvbiB0aGF0IGdldHMgYWxsIG9mIHRoZSBidWRnZXQgaW5mb3JtYXRpb24gZnJvbSB0aGUgZGF0YWJhc2VcblxuYXN5bmMgZnVuY3Rpb24gZ2V0QnVkZ2V0KCl7XG4gICAgY29uc3QgZGIgPSBhd2FpdCBvcGVuKHtcbiAgICAgICAgZmlsZW5hbWU6IFwiLi9zcWwvYmlnLmRiXCIsXG4gICAgICAgIGRyaXZlcjogc3FsaXRlMy5EYXRhYmFzZSxcbiAgICB9KTtcblxuICAgIGNvbnN0IGluZm8gPSBhd2FpdCBkYi5hbGwoYFxuICAgICAgICBTRUxFQ1QgKiBGUk9NIEJ1ZGdldHNcbiAgICBgKTtcblxuICAgIGF3YWl0IGRiLmNsb3NlKCk7XG5cbiAgICByZXR1cm4gaW5mbztcbn1cblxuXG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGJ1ZGdldEhhbmRsZXIocmVxLCByZXMpIHtcbiAgLy8gSGFuZGxpbmcgR2V0IHJlcXVlc3RcbiAgaWYgKHJlcS5tZXRob2QgPT0gXCJHRVRcIikge1xuICAgIHRyeXtcbiAgICAgIC8vdGhpcyBtYXkgbm90IGJlIG5lZWRlZFxuICAgICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IGdldEJ1ZGdldCgpO1xuICAgICAgaWYocGF5bG9hZC5sZW5ndGggPT0gMCl7XG4gICAgICAgIGNvbnNvbGUubG9nKHBheWxvYWQpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe21lc3NhZ2U6IFwibm8gYnVkZ2V0IHNldFwifSk7XG4gICAgICB9XG4gICAgICBlbHNle1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24ocGF5bG9hZCk7XG4gICAgICB9XG4gICAgfVxuICAgIGNhdGNoKGUpe1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5zZW5kKFwiaXRzIGJyb2tlblwiKVxuICAgIH1cbiAgfVxuICAvLyBIYW5kbGluZyBQT1NUIHJlcXVlc3RcbiAgaWYgKHJlcS5tZXRob2QgPT09IFwiUE9TVFwiKSB7XG4gICAgICBjb25zdCB7YnVkZ2V0X25hbWUsIHN0YXJ0X2RhdGUsIGVuZF9kYXRlLCBidWRnZXRfYW1vdW50fSA9IHJlcS5ib2R5O1xuICAgICAgXG4gICAgICAvL3RoZSBpZCBmb3IgdGhlIGJ1ZGdldFxuICAgICAgY29uc29sZS5sb2cocmVxLmJvZHkpO1xuICAgICAgY29uc3QgYnVkZ2V0X2lkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSk7XG5cbiAgICAgIC8vIFBvc3QgdGhlIGJ1ZGdldCB0byB0aGUgZGF0YWJhc2VcbiAgICAgIHRyeSB7XG4gICAgICAgICAgcG9zdEJ1ZGdldCh7IGJ1ZGdldF9pZCwgYnVkZ2V0X25hbWUsIHN0YXJ0X2RhdGUsIGVuZF9kYXRlLCBidWRnZXRfYW1vdW50fSk7XG4gICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiBcIkJ1ZGdldCBzZXQgc3VjY2Vzc2Z1bGx5IVwiIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHNldCBidWRnZXQuXCIsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xuICAgICAgfVxuICB9XG59XG5cbiJdLCJuYW1lcyI6WyJzcWxpdGUzIiwib3BlbiIsInBvc3RCdWRnZXQiLCJidWRnZXQiLCJkYiIsImZpbGVuYW1lIiwiZHJpdmVyIiwiRGF0YWJhc2UiLCJjb25zb2xlIiwibG9nIiwicnVuIiwiYnVkZ2V0X2lkIiwiYnVkZ2V0X25hbWUiLCJzdGFydF9kYXRlIiwiZW5kX2RhdGUiLCJidWRnZXRfYW1vdW50IiwiZSIsImNsb3NlIiwiZ2V0QnVkZ2V0IiwiaW5mbyIsImFsbCIsImJ1ZGdldEhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJwYXlsb2FkIiwibGVuZ3RoIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJzZW5kIiwiYm9keSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/budgets.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./src/pages/api/budgets.js"));
module.exports = __webpack_exports__;

})();